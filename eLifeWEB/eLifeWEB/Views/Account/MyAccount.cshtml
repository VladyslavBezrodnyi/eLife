@model eLifeWEB.Models.ApplicationUser
@{
    ViewBag.Title = "Моя сторінка";
}

@Styles.Render("~/Content/dhtmlxScheduler/dhtmlxscheduler-responsive.css")
@Scripts.Render("~/Scripts/dhtmlxScheduler/dhtmlxscheduler-responsive.js")

<h2>Моя сторінка</h2>

@Html.Partial("_AccountInfo", Model)
@if (Model.PasswordHash != null)
{
    @Html.ActionLink("Змінити пароль", "ChangePassword", "Manage")
}
else
{
    @Html.ActionLink("Додати пароль", "SetPassword", "Manage")
}
<dt>Двухфакторна перевірка подлиности:</dt>
<dd>
    @if (Model.TwoFactorEnabled)
    {
        using (Html.BeginForm("DisableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
        {
            @Html.AntiForgeryToken()
            <text>Включено
                <input type="submit" value="Вимкнути" class="btn btn-link" />
            </text>
        }
    }
    else
    {
        using (Html.BeginForm("EnableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
        {
            @Html.AntiForgeryToken()
            <text>Отключено
                <input type="submit" value="Увімкнути" class="btn btn-link" />
            </text>
        }
    }
</dd>
@if (ViewBag.Role == "patient")
{
    @Html.Partial("_PatientInfo", Model.PatientInform)
    @Html.ActionLink("Медична картка", "MedicalCard", new { }, new { @class = "btn btn-success" })
    @Html.ActionLink("Усі записи", "MyAppointment", new { }, new { @class = "btn btn-primary" })

    @Html.ActionLink("Чати", "Index", "Chats")

}
@if (ViewBag.Role == "doctor")
{
    @Html.Partial("_DoctorInfo", Model.DoctorInform)
    <div style="margin:0 auto;">
        @Html.Raw(ViewBag.Scheduler.Render())
    </div>
    @Html.ActionLink("Чати", "Index", "Chats")

}
@if (ViewBag.Role == "clinicAdmin")
{
    @Html.Partial("_ClinicAdminInfo", Model.ClinicAdmin.Clinic)
}


@if (ViewBag.Role == "doctor" || ViewBag.Role == "patient")
{
    @Html.ActionLink("Чати", "Index", "Chats", new { id = "" }, new { @class = "btn btn-primary" })
}

<script>
        function medicalAppointment(event_id){
        var url = "@Url.Action("ReceptionPreview", "Reception")" + "?recordId=" + event_id;
        window.location.href = url;
    }
</script>